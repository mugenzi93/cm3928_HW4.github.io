---
title: "Dashboards"
author: "Clement Mugenzi"
date: "10/27/2019"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(viridis)
library(p8105.datasets)
library(plotly)
```


```{r}
set.seed(1)

data("instacart")

 
instacart = 
  instacart %>%
  mutate(
    order_dow = recode(order_dow, "0" = "Sunday", "1" = "Monday", 
                       "2" = "Tuesday", "3" = "Wednesday", 
                       "4" = "Thursday", "5" = "Friday", 
                       "6" = "Saturday"), 
    order_dow = factor(order_dow, levels = c("Monday", "Tuesday", 
                                             "Wednesday", "Thursday", 
                                             "Friday", "Saturday",
                                             "Sunday"))) %>% 
  select(aisle, department, product_name, order_hour_of_day, order_dow) %>% 
  filter(order_hour_of_day %in% 11:14) %>% 
  sample_n(50)
  
```


```{r}
instacart %>% 
  mutate(text_label = str_c(product_name, order_dow)) %>% 
  plot_ly(
    x = ~aisle, y = ~department, type = "scatter", mode = "markers",
    color = ~order_hour_of_day, text = ~text_label, alpha = 0.5)
```



```{r}
instacart %>% 
  count(aisle) %>% 
  mutate(fct_reorder(aisle, n)) %>% 
  plot_ly(x = ~aisle, y = ~n, color = ~aisle, type = "bar")
```























