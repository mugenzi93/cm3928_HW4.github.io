---
title: "Association between Gender and Salary Setting at the Houston College of Medicine"
author: "Clement Mugenzi"
date: "12/20/2019"
output: html_document
---

```{r setup, include=FALSE}
library(MASS)
library(dplyr)
library(tidyverse)
library(knitr)
library(broom)
library(faraway)
library(arsenal)
library(caret)
library(kableExtra)
knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
theme_set(theme_minimal() + theme(legend.position = "right"))
```

# Introduction

Income inequality between men and women has been a point of debate over the years. To find our own answers, our team sought to examine the association between salary and gender at the Houston college of medicine. This was a cross-sectional study based on the salaries among faculties with varying expertise in the field of medicine. We created two regression models of baseline salary in 1994 and the increment of salary between 1994 and 1995, according to gender, department, years of experience, work emphasis, certification status, and rank. We found that gender was significantly associated with salary setting at baseline but that it was not a determining factor for the salary increase from between 1994 and 1995.

Title VII of the Civil Rights Act of 1964 is a federal law that prohibits employers from discriminating against employees on the basis of sex, race, color, national origin and religion[3]. Also, the equal pay act of 1963 requires that men and women in the same workplace be given equal pay for equal work. However, the U.S education system is one area that is not immune to this income gap problem. Several factors determine one’s compensation in the education system. Despite these legitimate factors that determine compensation, there are many cases that have been published claiming that female professors are getting paid less compared to their male colleagues while bearing the same, if not superior, titles or accolades.
The aim of this study is to examine the association between gender discrimination in setting salary within the Houston college of medicine where a female professor claimed, through a district court lawsuit, that there was evidence of discrimination against women in giving promotions and setting salaries. To support this, we built multiple regressionmodels using six predictor variables such as the subject's department, their area of expertise, whether or not they are board-certified, years of experience, and their position title. We tested for interactions and confounders that might be present between all the stated predictors and our main predictor of interest: the subject’s gender. Our response variables were the baseline salary in 1994 and the change in salary between 1994 and 1995.

# Methods

## Data Description

* Dept: Academic departments at Houston College of medicine. Biochemistry, Physiology, Genetics, Pediatrics, Medicine, and Surgery
* Gender: A dichotomous variable coded with dummy variables '1' for Male subjects and '0' for Female subjects
* Clin: A dummy variable with 1 = Primarily clinnical emphasis and 0 = Primarily research emphasis.
* Cert: 1 = Board certified and 0 = not certified
* Prate: Publication rate 
* Exper: years of experience since obtaining Medical Doctor degree.
* Rank: 1 = Assistant professor, 2 = Associate professor, 3 = full professor
* Sal94: Salary in academic year 1994
* Sal05: Salary in academic year 1995.

**Loading and Tidying the dataset**

```{r, message=FALSE}
lawsuit_df =
  read_csv("Data/Lawsuit.csv") %>% 
  janitor::clean_names() %>%
  rename("Department" = "dept", "Emphasis" = "clin", "Certification" = "cert",
         "Title" = "rank", "Experience" = "exper", "Publication" = "prate",
         "Salary (1994)" = "sal94", "Salary (1995)" = "sal95") %>%
  dplyr::mutate(
    Department = factor(Department, levels = c("1", "2", "3",
                                   "4", "5", "6")),
    gender = factor(gender, levels = c("1", "0")),
    Emphasis = factor(Emphasis, levels = c("1", "0")),
    Certification = factor(Certification, levels = c("1", "0")),
    Title = factor(Title, levels = c("1", "2", "3"))) %>% 
  mutate(
    gender = recode(gender, "1" = "Male", "0" = "Female"),
    Department = recode(Department, "1" = "Biochemistry/Molecular Biology", 
                        "2" = "Physiology", "3" = "Genetics",
                  "4" = "Pediatrics", "5" = "Medicine", "6" = "Surgery"),
    Emphasis = recode(Emphasis, "1" = "Clinical", "0" = "Research"),
    Certification = recode(Certification, "1" = "certified", 
                           "0" = "Not certified"),
    Title = recode(Title, "1" = "Assistant Professor", 
                   "2" = "Associate Professor", "3" = "Full Professor")) %>%
  arrange(gender)
```

The dataset for analysis has 261 observations of 8 variables. The distributions of salary amount in 1994 and 1995 were originally skewed. A natural log transformation was applied to these two variables to exhibit a normal distribution.

```{r, message=FALSE}
p1 = 
  lawsuit_df %>% 
  ggplot(aes(x = `Salary (1994)`)) + 
  geom_histogram(aes(x = `Salary (1994)`, y = ..density..), alpha = .7) +
  geom_density(aes(x = `Salary (1994)`)) +
  theme(plot.title = element_text(hjust = .5)) +
  labs(
    x = "Untransformed Salary (1994)") +
  theme_bw() +
  ggsci::scale_fill_lancet()

p2 = 
  lawsuit_df %>% 
  ggplot(aes(x = `Salary (1995)`)) + 
  geom_histogram(aes(x = `Salary (1995)`, y = ..density..), alpha = .7) +
  geom_density(aes(x = `Salary (1995)`)) +
  theme(plot.title = element_text(hjust = .5)) +
  labs(
    x = "Untransformed Salary (1995)") +
  theme_bw() +
  ggsci::scale_fill_lancet()

gridExtra::grid.arrange(p1, p2, ncol = 2)

lawsuit_df = 
  lawsuit_df %>% 
  mutate(log_sal94 = log(`Salary (1994)`),
         log_sal95 = log(`Salary (1995)`))


p3 = 
  lawsuit_df %>%
  ggplot(aes(x = log_sal94)) + 
  geom_histogram(aes(x = log_sal94, y = ..density..), alpha = .7) + 
  geom_density(aes(x = log_sal94)) +
  theme(plot.title = element_text(hjust = .5)) +
  labs(
    x = "Log-Transformed Salary (1994)") +
  theme_bw() +
  ggsci::scale_fill_lancet()
p4 = 
  lawsuit_df %>%
  ggplot(aes(x = log_sal95)) + 
  geom_histogram(aes(x = log_sal95, y = ..density..), alpha = .7) + 
  geom_density(aes(x = log_sal95)) +
  theme(plot.title = element_text(hjust = .5)) +
  labs(
    x = "Log-Transformed Salary (1995)") +
  theme_bw() +
  ggsci::scale_fill_lancet()
gridExtra::grid.arrange(p3, p4, ncol = 2)
```


Table 1 shows that the departments of Physiology, Genetics and Pediatrics had a significantly higher proportion of female faculties compared to the male, while the department of Surgery had a significantly lower proportion of female faculties. There was no significant difference in both clinical or research emphasis as well as certification between both genders. The results also presented that years after obtaining MD for females were shorter than that of males. By comparing the rank, which was also a proxy for productivity, the proportion of full professors among female faculties was much lesser than males.


```{r, eval=FALSE}
# Cleaning output
tab1_controls = tableby.control(
               total = T,
               test = T,
               numeric.stats = c("meansd", "medianq1q3", "range"),
               cat.stats = "countpct",
               stats.labels = list(
               meansd = "Mean (SD)",
               medianq1q3 = "Median (Q1, Q3)",
               range = "Min - Max",
               countpct = "N (%)"))

tab1 = tableby(gender ~ Department + Emphasis + Certification + Publication +
                  Experience + Title + `Salary (1994)` + `Salary (1995)`,
                data = lawsuit_df, control = tab1_controls)
summary(tab1, title = 'Descriptive Statistics', digits = 2, text = T)
```



![](images/Table1.jpg)

## Model Building

I built two models for the analysis of the association between gender and salary. For Model 1, the goal was to check whether there was gender discrimination in the baseline salary in 1994. Since the main outcome was the salary amount and the main variable of interest was gender, I first regressed the salary in 1994 with only `gender` to test the direct association, and then added the potential confounders one at a time to see if these potential confounders created a confounding effect. If the coefficient of `gender` changed directionality and/or there was an appreciable difference (10% in magnitude) after adding a new variable to the model, that variable would be regarded as a confounder. After checking all the potential confounders, interaction terms were added to the model for analyzing any interaction between gender and other factors. The second model generally followed the same path as the first model, However the main outcome in the second model was slightly different since it focused more on the salary increase from 1994 to 1995 rather than the baseline salary between both genders. The main outcome variable for both models were all log-transformed. There was one influential point in the dataset. I later decided to fit both models without that point after comparing the models fitted with and without that influential point. The significance level in our study was set to be 0.05.





















































